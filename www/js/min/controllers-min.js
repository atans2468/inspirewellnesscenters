var unionVillage=angular.module("unionVillage.controllers",[]);unionVillage.controller("LoginCtrl",function(o,e,i){function n(o){switch(o.provider){case"password":return o.password.email.replace(/@.*/,"");case"twitter":return o.twitter.displayName;case"facebook":return o.facebook.displayName}}var a=new Firebase("https://unionvillage.firebaseio.com/"),t=new Firebase("https://unionvillage.firebaseio.com/"),l=t.getAuth();l?(console.log("User "+l.uid+" is logged in with "+l.provider),i.go("unionVillage.dashboard")):(console.log("User is logged out"),i.go("unionVillage.home")),o.register=function(o,e){a.createUser({email:o,password:e},function(n){n?console.log("Error creating user:",n):(a.authWithPassword({email:o,password:e},function(o,e){o?console.log("Login Failed!",o):console.log("Authenticated successfully with payload:",e)}),i.go("unionVillage.dashboard"))})},o.login=function(o,e){a.authWithPassword({email:o,password:e},function(o){o?console.log("Login Failed!",o):i.go("unionVillage.dashboard")})};var s=!0,r=new Firebase("https://unionvillage.firebaseio.com/");r.onAuth(function(o){o&&s&&r.child("users").child(o.uid).set({provider:o.provider,name:n(o)})}),o.logout=function(){a.unauth(),i.go("unionVillage.home")}}),unionVillage.controller("threadCtrl",function(o,e,i){function n(i){o.todos=e(t)}var a=new Firebase("https://unionvillage.firebaseio.com/"),t=new Firebase("https://unionvillage.firebaseio.com/posts");t.on("value",function(o){i(function(){n(o),console.log(o)})});var l=a.child("posts");o.addItem=function(){var e=(new Date).valueOf();l.push({id:e,description:o.postDescription,liked:!1}),o.postDescription=""},o.changeStatus=function(o){var e=new Firebase(a+o.id);e.update({id:o.id,description:o.description})}});